<!--
 - Created by Denise.Baker on 4/13/24.
 -->

<!-- Project Card -->
<template>
    <div class="project-card">
        <article class="slds-card project-card-header">
            <div class="slds-card__header slds-grid project-box-header">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                                            <span class="slds-icon_container slds-icon-standard-account"
                                                  title="Project Information">
                                            <lightning-icon icon-name="standard:account"></lightning-icon>
                                            <span class="slds-assistive-text">Project Information for {project.Name}</span>
                                            </span>
                    </div>
                    <div class="slds-media__body">
                        <h2 class="slds-card__header-title ">
                            <div class="project-title-header">
                                <span>Project Information for {project.Name}</span>
                            </div>
                        </h2>
                    </div>

                </header>
            </div>

            <!---------------------- End of Header------------------------------------>

            <!------------------ Project Info ---------------------------------------->
            <div class="project-info-card">

                    <div class="slds-grid detail-box">
                        <div class="slds-col slds-size_1-of-2 left-col">
                            <div class="slds-form_horizontal slds-form slds-grid slds-wrap ">
                                <label class="slds-form-element__label label-class"
                                       for="record-name">Name</label>
                                <div class="slds-col slds-size_1-of-2 detail-class">{project.Name}</div>
                            </div>
                            <div class="slds-form_horizontal slds-form slds-grid slds-wrap ">
                                <label class="slds-form-element__label label-class"
                                       for="record-name">Description</label>
                                <div class="slds-col slds-size_1-of-2 detail-class">{project.Description__c}</div>
                            </div>
                        </div>
                        <div class="slds-col slds-size_1-of-2 right-col">
                            <div class="slds-form_horizontal slds-form slds-grid slds-wrap ">
                                <label class="slds-form-element__label label-class"
                                       for="record-name">Due Date</label>
                                <div class="slds-col slds-size_1-of-2 detail-class">{project.DueDate__c}</div>
                            </div>
                            <div class="slds-col slds-size_1-of-2">
                                <div class="slds-form_horizontal slds-form slds-grid">
                                    <label class="slds-form-element__label label-class"
                                           for="record-name">Status</label>
                                    <div class="slds-col slds-size_1-of-2 detail-class status-class">{project.Status__c}</div>
                                </div>
                            </div>
                        </div>

                    </div>

            </div>

            <!------------------ Task List ------------------------------------------->
            <article class="slds-card account-card-header">
                <div class="slds-card__header slds-grid task-list-header">

                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                                            <span class="slds-icon_container slds-icon-standard-account"
                                                  title="All Projects">
                                                <lightning-icon icon-name="standard:work_step_template"></lightning-icon>
                                            <span class="slds-assistive-text">All Projects</span>
                                            </span>
                        </div>

                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title ">
                                <div class="task-header">
                                    <span>Tasks related to {project.Name}</span>
                                </div>
                            </h2>
                        </div>
                        <div class="slds-grid_align-end new-button">
                            <lightning-button variant="neutral" label="New" title="Primary action"
                                              onclick={handleNewModal}
                                              class="slds-grid_align-end ">
                            </lightning-button>
                        </div>

                    </header>
                </div>
            <div class="slds-box slds-theme_default">
                <lightning-input
                        label="Search Term"
                        variant="label-hidden"
                        placeholder="Search by name, description, due date, or status"
                        type="text"
                        value={searchKey}
                        onchange={handleSearch}
                >
                </lightning-input>
            </div>
            <div class="slds-m-around_small">
                <lightning-datatable
                        key-field="id"
                        data={filteredTasks}
                        columns={cols}
                        onrowaction={handleRowAction}
                        sorted-by={sortBy}
                        sorted-direction={sortDirection}
                        onsort={doSorting}
                        hide-checkbox-column="true"
                >
                </lightning-datatable>
            </div>
            </article>
<!--            <lightning-button label="Previous" icon-name="utility:chevronleft" onclick={handlePrevious}></lightning-button>-->
        </article>
    </div>
    <template if:true={error}>
        <c-error-panel errors={error}></c-error-panel>
    </template>
</template>